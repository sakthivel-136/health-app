# -*- coding: utf-8 -*-
"""healthcheckerapp.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1HF3HtWcbGulDItoUdLITLyXfq1P2dbK5
"""
import streamlit as st
import random

# Set page config
st.set_page_config(page_title="üØ™ Health Analyser", layout="wide")

# Initialize session state for chat visibility
if "chat_visible" not in st.session_state:
    st.session_state.chat_visible = False

# Floating Button (no page reload)
if st.button("üí¨ Toggle Chat", key="chat_button"):
    st.session_state.chat_visible = not st.session_state.chat_visible

# App layout
left, center, right = st.columns([1, 2, 3])

# Center title
with center:
    st.markdown("""
    <div style='display: flex; justify-content: center;'>
        <h1 style='color: #4CAF50;'>Health Analyser</h1>
    </div>
    """, unsafe_allow_html=True)

# Sidebar (left column) - tool selection
with left:
    st.markdown("<h2 style='margin-bottom:10px;'>üß† Tools</h2>", unsafe_allow_html=True)
    st.markdown("<div style='padding-left: 10px;'>", unsafe_allow_html=True)
    tool = st.radio("Select a health tool:", [
        "None", "BMI Calculator", "Blood Pressure Checker", "Hydration Checker",
        "Workout Calorie Estimator", "Heart Rate Monitor", "Sleep Tracker",
        "Diabetes Risk Checker", "Step Counter", "Stress Level Estimator", "Vision Check"
    ], index=0)
    st.markdown("</div>", unsafe_allow_html=True)

# Main content (right column)
with right:
    if tool == "None":
        st.markdown("""
            <marquee behavior="scroll" direction="left" scrollamount="6" style="color:#ff5722; font-size:24px; font-weight:bold;">
                When the going gets rough, the tough gets going. Everyday I‚Äôm surviving just to keep on thriving.
            </marquee>
        """, unsafe_allow_html=True)

    elif tool == "BMI Calculator":
        st.header("üÆ¢ BMI Calculator")
        height = st.number_input("Enter your height (in meters):", min_value=0.0, format="%.2f")
        weight = st.number_input("Enter your weight (in kilograms):", min_value=0.0, format="%.2f")
        if st.button("Calculate BMI"):
            if height > 0:
                bmi = weight / (height ** 2)
                st.success(f"Your BMI is: {bmi:.2f}")
                if bmi < 18.5:
                    st.info("You are underweight.")
                elif 18.5 <= bmi < 24.9:
                    st.success("You have a normal weight.")
                elif 25 <= bmi < 29.9:
                    st.warning("You are overweight.")
                else:
                    st.error("You are obese.")

    elif tool == "Blood Pressure Checker":
        st.header("üß∞ Blood Pressure Checker")
        systolic = st.number_input("Enter Systolic (upper) value:", min_value=0)
        diastolic = st.number_input("Enter Diastolic (lower) value:", min_value=0)
        if st.button("Check BP"):
            if systolic < 90 or diastolic < 60:
                st.warning("Low Blood Pressure (Hypotension)")
            elif 90 <= systolic <= 120 and 60 <= diastolic <= 80:
                st.success("Normal Blood Pressure")
            elif 120 < systolic <= 139 or 80 < diastolic <= 89:
                st.warning("Prehypertension")
            else:
                st.error("High Blood Pressure (Hypertension)")

    elif tool == "Hydration Checker":
        st.header("üíß Hydration Checker")
        water_intake = st.number_input("Water intake today (in liters):", min_value=0.0, format="%.2f")
        weight = st.number_input("Your weight (in kg):", min_value=0.0, format="%.2f")
        if st.button("Check Hydration"):
            recommended = weight * 0.033
            st.info(f"Recommended: {recommended:.2f} L/day")
            if water_intake >= recommended:
                st.success("You're well hydrated!")
            else:
                st.warning("You need to drink more water.")

    elif tool == "Workout Calorie Estimator":
        st.header("üèÉ Workout Calorie Estimator")
        activity = st.selectbox("Select activity:", ["Running", "Cycling", "Walking", "Jumping Rope"])
        duration = st.number_input("Duration (minutes):", min_value=0)
        weight = st.number_input("Your weight (kg):", min_value=0.0, format="%.2f")
        if st.button("Estimate Calories"):
            met_values = {"Running": 9.8, "Cycling": 7.5, "Walking": 3.8, "Jumping Rope": 12.3}
            met = met_values.get(activity, 1)
            calories_burned = (met * 3.5 * weight / 200) * duration
            st.success(f"You burned approximately {calories_burned:.2f} calories.")

    elif tool == "Heart Rate Monitor":
        st.header("‚ù§Ô∏è Heart Rate Monitor")
        bpm = st.number_input("Enter your current BPM (Beats Per Minute):", min_value=0)
        if st.button("Check Heart Rate"):
            if bpm < 60:
                st.warning("Low heart rate")
            elif 60 <= bpm <= 100:
                st.success("Normal heart rate")
            else:
                st.error("High heart rate")

    elif tool == "Sleep Tracker":
        st.header("üõå Sleep Tracker")
        hours = st.slider("How many hours did you sleep last night?", 0, 12, 7)
        if st.button("Evaluate Sleep"):
            if hours < 6:
                st.warning("You should try to get more rest.")
            elif 6 <= hours <= 8:
                st.success("Great! You're getting enough sleep.")
            else:
                st.info("Too much sleep can also affect health. Balance is key!")

    elif tool == "Diabetes Risk Checker":
        st.header("üß™ Diabetes Risk Checker")
        age = st.number_input("Enter your age:", min_value=0)
        bmi = st.number_input("Enter your BMI:", min_value=0.0, format="%.1f")
        family_history = st.radio("Family history of diabetes?", ["Yes", "No"])
        if st.button("Check Risk"):
            risk_score = 0
            if age >= 45: risk_score += 1
            if bmi >= 25: risk_score += 1
            if family_history == "Yes": risk_score += 1

            if risk_score == 0:
                st.success("Low risk of diabetes.")
            elif risk_score == 1:
                st.info("Moderate risk. Consider lifestyle improvements.")
            else:
                st.error("High risk. Consider consulting a doctor.")

    elif tool == "Step Counter":
        st.header("üö∂ Step Counter")
        steps = st.number_input("Enter number of steps walked today:", min_value=0)
        if st.button("Evaluate Steps"):
            if steps < 5000:
                st.warning("Try to walk more. Aim for at least 5000 steps.")
            elif 5000 <= steps < 10000:
                st.success("Good job! You're moderately active.")
            else:
                st.info("Excellent! Very active lifestyle.")

    elif tool == "Stress Level Estimator":
        st.header("üò∞ Stress Level Estimator")
        mood = st.slider("Rate your mood today (1=Low, 10=High):", 1, 10, 5)
        if st.button("Check Stress"):
            if mood <= 3:
                st.error("High stress. Consider taking a break or meditating.")
            elif 4 <= mood <= 7:
                st.warning("Moderate stress. Stay mindful and take care.")
            else:
                st.success("Low stress! Keep up the positivity.")

    elif tool == "Vision Check":
        st.header("üëÅÔ∏è Vision Check")
        screen_time = st.slider("Hours of screen time today:", 0, 12, 6)
        if st.button("Evaluate Vision Stress"):
            if screen_time < 4:
                st.success("Your eyes are doing well!")
            elif 4 <= screen_time <= 8:
                st.warning("Take frequent breaks to reduce eye strain.")
            else:
                st.error("High screen time! Practice the 20-20-20 rule.")

# Chat Panel
if st.session_state.chat_visible:
    st.markdown("---")
    st.subheader("Ask me anything about Health")
    question = st.selectbox("Choose a question:", [
        "How does stress affect BPM?",
        "How much water should I drink per day?",
        "What is a healthy BMI range?",
        "How much sleep is enough?",
        "Why are steps important daily?"
    ])

    if question == "How does stress affect BPM?":
        st.info("Stress can increase your BPM due to adrenaline. Try mindfulness or deep breathing.")
    elif question == "How much water should I drink per day?":
        st.info("About 2.7L for women and 3.7L for men is ideal, but it depends on weight and activity.")
    elif question == "What is a healthy BMI range?":
        st.info("A healthy BMI range is between 18.5 and 24.9.")
    elif question == "How much sleep is enough?":
        st.info("Adults should get 7‚Äì9 hours of sleep per night.")
    elif question == "Why are steps important daily?":
        st.info("Walking helps cardiovascular health, burns calories, and boosts mood.")
